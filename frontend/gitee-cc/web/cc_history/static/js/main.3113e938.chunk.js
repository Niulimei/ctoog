(this.webpackJsonpcc_history_query=this.webpackJsonpcc_history_query||[]).push([[0],{181:function(e,t,a){},256:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(24),c=a.n(o),i=a(50),r=a(58),s=a(89),d=a(261),u=a(260),b=a(258),l=a(259),j=a(87),O=a(64),p=a.n(O),h=a(150);function y(e,t){return new Promise((function(a,n){p.a.get(e,{params:t}).then((function(e){a(e.data)})).catch((function(e){n(e.data),h.b.error(e.message)}))}))}a(181);var f="SAVE_HISTORY",m="SAVE_OPTION",_=a(23),x=a(39),S=(d.a.Search,{bordered:!1,size:"default",expandable:{expandedRowRender:function(e){return Object(x.jsx)("p",{className:"pSty",dangerouslySetInnerHTML:{__html:e.description}})}},title:void 0,showHeader:!0,hasData:!0,tableLayout:void 0,top:"10%",bottom:"bottomRight"}),g=function(){var e,t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1],O=Object(n.useState)(!0),p=Object(s.a)(O,2),h=p[0],g=p[1],v=Object(n.useState)(1),w=Object(s.a)(v,2),I=w[0],E=w[1],k=Object(n.useState)([]),T=Object(s.a)(k,2),D=(T[0],T[1],Object(j.c)((function(e){return e}))),N=D.historyDataSource,C=D.total,R=D.options,L=Object(j.b)(),V=Object(n.useMemo)((function(){return[{title:"\u540d\u79f0",key:"name",dataIndex:"name"},{title:"\u6240\u6709\u4eba",key:"owner",dataIndex:"owner"},{title:"\u521b\u5efa\u65f6\u95f4",key:"createTime",dataIndex:"createTime"},{title:"ID",key:"id",dataIndex:"id"},{title:"\u6d3b\u52a8\u72b6\u6001",key:"historyType",dataIndex:"historyType"}]}),[]),X=Object(_.e)().codeId,z=Object(n.useCallback)((function(e){g(!0);var t={git_name:X,limit:10,offset:10*(I-1)};e&&(t.id=e,t.offset=0),y("/gitee-cc/cc_history",t).then((function(e){c([]),g(!1),L({type:f,payload:e})})).catch((function(){g(!1)}))}),[X,I]);Object(n.useEffect)(z,[z]);var H=Object(n.useCallback)((function(e){z(e)}),[z]),q=Object(n.useCallback)((function(e){var t=e.target.value;""!=t&&y("/gitee-cc/cc_history_search",{git_name:X,limit:5,offset:0,id:t}).then((function(e){L({type:m,payload:null===e||void 0===e?void 0:e.map((function(e){return{label:e,value:e}}))})}))}),[]),A=Object(n.useCallback)((function(e,t){var a=[];e&&a.push(t.id),c(a)}),[]);return Object(x.jsxs)("div",{children:[Object(x.jsx)(u.a,{className:"site-page-header",title:"\u5df2\u5f52\u6863\u5386\u53f2\u8bb0\u5f55"}),Object(x.jsx)(b.a,{dropdownClassName:"dropdownSty",style:{width:"400px",margin:"0 0 0 24px"},options:R,onSelect:H,children:Object(x.jsx)(d.a.Search,{size:"large",placeholder:"\u8bf7\u8f93\u5165ID\u8fdb\u884c\u68c0\u7d22",enterButton:!0,onChange:q,onSearch:H})}),Object(x.jsx)(l.a,Object(r.a)(Object(r.a)({},S),{},(e={loading:h,expandedRowKeys:o,pagination:{position:[S.top,S.bottom]},columns:V},Object(i.a)(e,"pagination",{total:C,position:"bottom",current:I,showSizeChanger:!1,onChange:E}),Object(i.a)(e,"dataSource",N),Object(i.a)(e,"rowExpandable",(function(e){return e.description?"Not Expandable":""})),Object(i.a)(e,"style",{margin:"20px 0 0 0"}),Object(i.a)(e,"rowKey",(function(e){return e.id})),Object(i.a)(e,"onExpand",A),e)))]})},v=a(117),w=a(147),I={historyDataSource:[],total:0,options:[]};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case f:var o=n.infoItem,c=n.count,i=void 0===c?0:c;return Object(r.a)(Object(r.a)({},e),{},{historyDataSource:o,total:i});case m:return Object(r.a)(Object(r.a)({},e),{},{options:n});default:return e}},k=Object(w.a)(E,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(Object(x.jsx)(v.a,{children:Object(x.jsx)(j.a,{store:k,children:Object(x.jsx)(_.a,{path:"/:codeId",component:g})})}),document.getElementById("root"))}},[[256,1,2]]]);
//# sourceMappingURL=main.3113e938.chunk.js.map